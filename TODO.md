# 🎯 Superflow 任务清单

> 专门的任务跟踪文件，与 AGENTS.md 保持同步

## 📊 进度概览

- **总任务数**: 42
- **已完成**: 2
- **进行中**: 0
- **待开始**: 40
- **完成率**: 5%

---

## 🔥 P0 任务（核心功能，优先完成）

### 1. 一体化 Console 与全局状态

> 📄 原始引用: `AGENTS.md:58-62` (P0 一体化 Console 与全局状态)

- [x] **DONE** StudioPage 集成基础 Console  
       `src/studio/StudioPage.tsx` | 完成时间: 已完成  
       📋 引用: `AGENTS.md:59`
- [ ] **TODO** 统一运行面板/错误修复/测试为 Console  
       负责人: - | 预计: 2天  
       📋 引用: `AGENTS.md:60`
- [ ] **TODO** 顶部全局状态条（runId/用时/成功率/缓存/日志源）  
       负责人: - | 预计: 1天  
       📋 引用: `AGENTS.md:61`
- [ ] **TODO** ⌘K 命令面板与全局搜索  
       负责人: - | 预计: 3天  
       📋 引用: `AGENTS.md:62`

### 2. 大图性能与可操作性

> 📄 原始引用: `AGENTS.md:64-69` (P0 大图性能与可操作性)

- [x] **DONE** 节点/边虚拟化与惰性渲染  
       `src/flow/FlowCanvas.ts` | 完成时间: 已完成  
       📋 引用: `AGENTS.md:65`
- [ ] **TODO** 自动布局接入（elkjs → FlowEditor工具栏）  
       负责人: - | 预计: 1天  
       📋 引用: `AGENTS.md:67`
- [ ] **TODO** 状态过滤（failed/running）  
       负责人: - | 预计: 2天  
       📋 引用: `AGENTS.md:68`
- [ ] **TODO** 子图/分组折叠  
       负责人: - | 预计: 3天  
       📋 引用: `AGENTS.md:66`
- [ ] **TODO** 框选批量操作与选区重跑  
       负责人: - | 预计: 2天  
       📋 引用: `AGENTS.md:69`

### 3. Inspector / 强类型与校验

> 📄 原始引用: `AGENTS.md:83-86` (P0 强类型与校验)

- [ ] **TODO** 表单即时校验（Ajv + JSON Schema）  
       负责人: - | 预计: 2天  
       📋 引用: `AGENTS.md:85`
- [ ] **TODO** outputs 变更兼容性判定  
       负责人: - | 预计: 3天  
       📋 引用: `AGENTS.md:86`
- [ ] **TODO** 触发 DSL 迁移向导  
       负责人: - | 预计: 4天  
       📋 引用: `AGENTS.md:72` (从模拟页迁移)

### 4. Run Center / 可观测性

- [ ] **TODO** Trace 进度条可点击跳转节点  
       负责人: - | 预计: 2天
- [ ] **TODO** 日志级别过滤、书签、跳转  
       负责人: - | 预计: 2天
- [ ] **TODO** 链路ID贯穿（runId/chainId/nodeId）  
       负责人: - | 预计: 1天

### 5. App Services / CQRS 门面

- [ ] **TODO** startRun/retryNode 与事件流对齐  
       负责人: - | 预计: 3天
- [ ] **TODO** 保存即新版本（差异记录）  
       负责人: - | 预计: 2天

### 6. 数据与存储 / Dexie

- [ ] **TODO** 表结构与索引校准  
       负责人: - | 预计: 2天
- [ ] **TODO** 日志分片加载与 NDJSON 导出  
       负责人: - | 预计: 2天

### 7. Runtime / Worker 沙箱

- [ ] **TODO** Web Worker 默认断网、超时终止  
       负责人: - | 预计: 3天

### 8. 迁移向导核心

- [ ] **TODO** 节点级选择→字段级映射  
       负责人: - | 预计: 5天
- [ ] **TODO** 撤销/审计事件流  
       负责人: - | 预计: 3天

### 9. V1 闭环验收

- [ ] **TODO** 三节点示例 DAG 完整流程  
       负责人: - | 预计: 2天

---

## ⭐ P1 任务（体验优化，后续完成）

### 代码页 (Monaco + LSP)

- [ ] **TODO** LSP/格式化/诊断  
       负责人: - | 预计: 4天
- [ ] **TODO** 保存前预检  
       负责人: - | 预计: 2天

### 错误修复 Agent

- [ ] **TODO** 提示模板与上下文最小化  
       负责人: - | 预计: 3天
- [ ] **TODO** 分块补丁与 Dry-Run  
       负责人: - | 预计: 4天

### Inspector 数据血缘

- [ ] **TODO** 入参来源标注  
       负责人: - | 预计: 3天
- [ ] **TODO** 采样数据与类型显示  
       负责人: - | 预计: 2天

### 键盘无障碍

- [ ] **TODO** 完整快捷键映射  
       负责人: - | 预计: 2天
- [ ] **TODO** 状态色对比度校验  
       负责人: - | 预计: 1天

### Artifact 体验

- [ ] **TODO** 时间线/表格视图  
       负责人: - | 预计: 3天
- [ ] **TODO** 失效策略与批量下载  
       负责人: - | 预计: 2天

### 首次体验

- [ ] **TODO** 示例 DAG 与空态引导  
       负责人: - | 预计: 3天

---

## 📅 里程碑规划

### M1-Core-Runtime (当前)

**目标**: 核心运行时系统  
**截止**: 2025-09-20  
**包含任务**: Console、Flow性能、Inspector校验、Run Center、Services、Data、Runtime

### M2-Debug-Obs

**目标**: 调试与可观测性  
**截止**: 2025-09-27  
**包含任务**: 状态过滤、命令面板、Trace联动、日志过滤

### M3-Migration

**目标**: 迁移向导与版本管理  
**截止**: 2025-10-04  
**包含任务**: DSL迁移、版本控制、撤销审计

### M4-Agent-Test

**目标**: AI集成与测试  
**截止**: 2025-10-11  
**包含任务**: 错误修复Agent、测试面板、性能优化

---

## 📝 任务更新日志

### 2025-09-07

- ✅ 创建专门的 TODO.md 任务跟踪文件
- ✅ 整理了 P0/P1 任务清单，共42个任务
- ✅ 设置了里程碑和预计工期
- 📋 下一步：开始执行第一个任务

---

## 🔧 使用说明

### 1. 开始任务

1. 选择一个 **TODO** 状态的任务
2. 改为 **DOING** 并填写负责人
3. 开始编码

### 2. 完成任务

1. 改为 **DONE** 并填写完成时间
2. 更新相关文件路径
3. 更新顶部进度概览
4. 在任务更新日志中记录

### 3. 同步到 GitHub (可选)

```bash
# 将重要任务同步到 GitHub Issues
./scripts/projects/create-issues.sh scripts/projects/issues-complete.csv
```

### 4. 查看进度

```bash
# 查看项目整体进度
./scripts/projects/check-progress.sh
```
