# 0002-引入分层基础包

## 状态

已接受

## 背景

为了落实领域驱动与分层架构，需要将核心类型、数据访问与应用服务解耦，便于后续扩展与测试。

## 决策

- 新建 `@core` 包，集中领域模型与协议定义。
- 新建 `@data` 包，封装 Dexie 实现并提供存储适配器。
- 新建 `@app/services` 包，作为 CQRS 门面提供用例服务。
- 其他模块仅通过上述包的 `index.ts` 公开 API 交互，禁止深层引用。

## 迁移路径

1. 迁移原 `src/shared/types` 与 `run-center/types` 至 `@core`。
2. 将 Dexie 存储实现移至 `@data`，并通过 `@core` 的接口定义交互。
3. 将 `RunCenterService` 抽离到 `@app/services`，UI 层仅调用服务层。
4. 更新路径映射与配置，保证编译与测试通过。

## 后续

- 逐步将其他服务与适配器迁移到各自包中。
- 完成 ESLint 依赖约束以防止跨层倒置。
